openapi: 3.0.3
info:
  version: 1.0.0
  title: Портал Информзащита
  description: Описание API для взаимодействия с порталом
servers:
  - url: '{schema}://portal-frontend.dcs.infosec.ru/'
    description: 'API версии 1'
    variables:
      schema:
        enum:
          - http
          - https
        default: https
tags:
  - name: auth
    description: Методы аутентификации
  - name: admin
    description: Методы для администрирования
  - name: departments
    description: Методы для получения подразделений
  - name: employees
    description: Методы для работы с сотрудниками
  - name: news
    description: Методы для работы с новостями
  - name: surveys
    description: Методы для работы с опросами
  - name: notice
    description: Методы для работы с объявлениями
  - name: files
    description: Методы для работы с файлами
  - name: comments
    description: Методы для работы с комментариями
  - name: likes
    description: Методы для работы с лайками
  - name: newsSections
    description: Методы для получения рубрик новостей
paths:
  /api/v1/login:
    post:
      tags:
        - auth
      summary: Вход в систему
      description: Вход в систему по логину и паролю. Сервер устанавливает куку httpOnly secure с токеном, соответственно лиент не может ей управлять.
      operationId: login
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginRequestBody'
      responses:
        '200':
          description: В случае, если прошли аутентификацию, получаем текущий профиль
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProfileDto'
        '401':
          description: Если логин или пароль неверны
  /api/v1/user:
    get:
      tags:
        - auth
      summary: Получение данных текущей сессии
      description: Метод проверяет авторизацию и возвращает то же самое, что вернул бы /login при успешной аутентификации.
      operationId: getUser
      responses:
        '200':
          description: В случае, если мы авторизованы, получаем текущий профиль
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProfileDto'
        '401':
          description: Если мы не авторизорваны неверны
  /api/v1/logout:
    get:
      tags:
        - auth
      summary: Завершение сессии
      description: При вызове сервер очищает куку с токеном пользователя.
      operationId: logout
      responses:
        '200':
          description: В случае, если были авторизованы и успешно завершили сессию
        '400':
          description: Если не были авторизованы
  /api/v1/notice:
    post:
      tags:
        - notice
      summary: Получение списка объявлений
      description: Эндпоинт для получения списка объявлений с параметрами поиска
      operationId: searchNotices
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RequestBody'
      responses:
        '200':
          description: 'Список объявлений'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NoticeListDto'
    put:
      tags:
        - notice
        - admin
      summary: Добавление объявления
      description: Эндпоинт для создания объявления
      operationId: addNotice
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/NoticeDraftDto'
      responses:
        '200':
          description: 'Объявление'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NoticeDto'
  /api/v1/notice/{id}:
    get:
      tags:
        - notice
      summary: Получение карточки объявления
      description: Получение всех данных объявления
      operationId: getNoticeById
      parameters:
        - name: id
          description: Идентификатор объявления
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NoticeDto'
    put:
      tags:
        - notice
        - admin
      summary: Редактирование объявления
      description: Изменение данных объявления
      operationId: updateNotice
      parameters:
        - name: id
          description: Идентификатор объявления
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/NoticeDraftDto'
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NoticeDto'
    delete:
      tags:
        - notice
        - admin
      summary: Удаление объявления
      description: Удаление объявления из системы
      operationId: removeNotice
      parameters:
        - name: id
          description: Идентификатор объявления
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: ok
  /api/v1/notice/{id}/likes:
    post:
      tags:
        - notice
        - likes
      summary: Добавление или удаление лайка
      description: Если лайка нет, добавится, если есть - удалится
      operationId: updateNoticeLike
      parameters:
        - name: id
          description: Идентификатор объявления
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: 'Список лайков'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LikesListDto'
    get:
      tags:
        - notice
        - likes
      summary: Получение списка лайков объявления
      description: Эндпоинт для получения списка лайков объявления
      operationId: getNoticeLikes
      parameters:
        - name: id
          description: Идентификатор объявления
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: 'Список лайков'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LikesListDto'
  /api/v1/notice/{id}/comments:
    put:
      tags:
        - notice
        - comments
      summary: Добавление комментария
      description: Эндпоинт для создания комментария
      operationId: addNoticeComment
      parameters:
        - name: id
          description: Идентификатор объявления
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CommentDraftDto'
      responses:
        '200':
          description: 'Комментарий'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CommentDto'
    post:
      tags:
        - notice
        - comments
      summary: Получение списка комментариев
      description: Эндпоинт для получения списка комментариев объявления с параметрами поиска
      operationId: getNoticeComments
      parameters:
        - name: id
          description: Идентификатор объявления
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RequestBody'
      responses:
        '200':
          description: 'Список комментариев'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CommentsListDto'
  /api/v1/comments/{id}:
    put:
      tags:
        - comments
      summary: Изменение комментария
      description: Эндпоинт для редактирования комментария
      operationId: editNoticeComment
      parameters:
        - name: id
          description: Идентификатор комментария
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CommentDraftDto'
      responses:
        '200':
          description: 'Комментарий'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CommentDto'
    get:
      tags:
        - comments
      summary: Получение комментария
      description: Эндпоинт для получения комментария
      operationId: getNoticeComment
      parameters:
        - name: id
          description: Идентификатор комментария
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: 'Комментарий'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CommentDto'
    delete:
      tags:
        - comments
      summary: Удаление комментария
      description: Эндпоинт для удаления своего комментария
      operationId: removeNoticeComment
      parameters:
        - name: id
          description: Идентификатор комментария
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: ok
  /api/v1/news:
    post:
      tags:
        - news
      summary: Получение списка новостей
      description: Эндпоинт для получения списка новостей с параметрами поиска
      operationId: searchNews
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RequestBody'
      responses:
        '200':
          description: 'Список новостей'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NewsListDto'
    put:
      tags:
        - news
        - admin
      summary: Добавление новости
      description: Эндпоинт для создания новости
      operationId: addNews
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/NewsDraftDto'
      responses:
        '200':
          description: 'Новость'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NewsDto'
  /api/v1/news/{id}:
    get:
      tags:
        - news
      summary: Получение карточки новости
      description: Получение всех данных новости
      operationId: getNewsById
      parameters:
        - name: id
          description: Идентификатор новости
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NewsDto'
    put:
      tags:
        - news
        - admin
      summary: Редактирование новости
      description: Изменение данных новости
      operationId: updateNews
      parameters:
        - name: id
          description: Идентификатор новости
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/NewsDraftDto'
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NewsDto'
    delete:
      tags:
        - news
        - admin
      summary: Удаление новости
      description: Удаление новости из системы
      operationId: removeNews
      parameters:
        - name: id
          description: Идентификатор новости
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: ok
  /api/v1/news/{id}/likes:
    post:
      tags:
        - news
        - likes
      summary: Добавление или удаление лайка
      description: Если лайка нет, добавится, если есть - удалится
      operationId: updateNewsLike
      parameters:
        - name: id
          description: Идентификатор новости
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: 'Список лайков'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LikesListDto'
    get:
      tags:
        - news
        - likes
      summary: Получение списка лайков новости
      description: Эндпоинт для получения списка лайков новости
      operationId: getNewsLikes
      parameters:
        - name: id
          description: Идентификатор новости
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: 'Список лайков'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LikesListDto'
  /api/v1/news/{id}/comments:
    put:
      tags:
        - news
        - comments
      summary: Добавление комментария
      description: Эндпоинт для создания комментария
      operationId: addNewsComment
      parameters:
        - name: id
          description: Идентификатор новости
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CommentDraftDto'
      responses:
        '200':
          description: 'Комментарий'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CommentDto'
    post:
      tags:
        - news
        - comments
      summary: Получение списка комментариев
      description: Эндпоинт для получения комментариев новости с параметрами поиска
      operationId: getNewsComments
      parameters:
        - name: id
          description: Идентификатор новости
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RequestBody'
      responses:
        '200':
          description: 'Список комментариев'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CommentsListDto'
  /api/v1/surveys:
    post:
      tags:
        - surveys
      summary: Получение списка опросов
      description: Эндпоинт для получения списка опросов
      operationId: searchSurveys
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RequestBody'
      responses:
        '200':
          description: 'Список опросов'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SurveysListDto'
    put:
      tags:
        - surveys
        - admin
      summary: Добавление опроса
      description: Эндпоинт для создания опроса
      operationId: addSurvey
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SurveyDraftDto'
      responses:
        '200':
          description: 'Опрос'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SurveyDto'
  /api/v1/surveys/{id}:
    get:
      tags:
        - surveys
      summary: Получение карточки опроса
      description: Получение всех данных опроса
      operationId: getSurveyById
      parameters:
        - name: id
          description: Идентификатор опроса
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SurveyDto'
    put:
      tags:
        - surveys
        - admin
      summary: Редактирование опроса
      description: Изменение данных опроса
      operationId: updateSurvey
      parameters:
        - name: id
          description: Идентификатор опроса
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SurveyDraftDto'
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SurveyDto'
    delete:
      tags:
        - surveys
        - admin
      summary: Удаление опроса
      description: Удаление опроса из системы
      operationId: removeSurvey
      parameters:
        - name: id
          description: Идентификатор опроса
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: ok
  /api/v1/surveys/{id}/answers:
    post:
      tags:
        - surveys
      summary: Добавление или удаление ответа
      description: Если ответ был, и в опросе editable = true, то отрелдактируется, если нет - добавится
      operationId: updateSurveyAnswer
      parameters:
        - name: id
          description: Идентификатор опроса
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AnswerDraftDto'
      responses:
        '200':
          description: 'ok'
    get:
      tags:
        - surveys
      summary: Получение списка ответов на опрос
      description: Эндпоинт для получения списка ответов
      operationId: getSurveyAnswers
      parameters:
        - name: id
          description: Идентификатор опроса
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: 'Список лайков'
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/AnswerDto'
  /api/v1/departments:
    get:
      tags:
        - departments
      summary: Получение списка подразделений
      description: Эндпоинт для получения списка подразделений
      operationId: getDepartments
      responses:
        '200':
          description: 'Список подразделений'
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/DepartmentDto'
  /api/v1/departments/{id}:
    get:
      tags:
        - departments
      summary: Получение карточки подразделения
      description: Получение всех данных подразделения
      operationId: getDepartmentById
      parameters:
        - name: id
          description: Идентификатор подразделения
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DepartmentDto'
  /api/v1/newsSection:
    get:
      tags:
        - newsSections
      summary: Получение списка рубрик новостей
      description: Эндпоинт для получения списка рубрик
      operationId: getNewsSections
      responses:
        '200':
          description: 'Список рубрик'
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/NewsSectionDto'
  /api/v1/newsSection/{id}:
    get:
      tags:
        - newsSections
      summary: Получение карточки рубрики новостей
      description: Получение всех данных рубрики
      operationId: getNewsSectionById
      parameters:
        - name: id
          description: Идентификатор рубрики
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NewsSectionDto'
  /api/v1/employees:
    post:
      tags:
        - employees
      summary: Получение списка сотрудников
      description: Эндпоинт для получения списка сотрудников с параметрами поиска
      operationId: searchEmployees
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RequestBody'
      responses:
        '200':
          description: 'Список сотрудников'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EmployeesListDto'
  /api/v1/employees/{id}:
    get:
      tags:
        - employees
      summary: Получение карточки сотрудника
      description: Получение всех данных сотрудника
      operationId: getEmployeeById
      parameters:
        - name: id
          description: Идентификатор сотрудника
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EmployeeDto'
  /api/v1/files/{id}:
    get:
      tags:
        - files
      summary: Получение файла
      description: Получение содержимого файла
      operationId: getFile
      parameters:
        - name: id
          description: Идентификатор файла
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: ok
          content:
            blob:
              schema:
                type: string
                format: binary
          headers:
            Content-Type:
              schema:
                type: string
                description: File content type
                example: application/pdf
            Content-Disposition:
              schema:
                type: string
                description: File name for browser could download file with original name by default
                example: attachment; filename="name.pdf"
    post:
      tags:
        - files
      summary: Замена файла
      operationId: updateFile
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
      parameters:
        - name: id
          description: Идентификатор файла
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: ok
    delete:
      tags:
        - files
      summary: Удаление файла
      operationId: removeFile
      parameters:
        - name: id
          description: Идентификатор файла
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: ok
  /api/v1/files:
    post:
      tags:
        - files
      summary: Заливка файла
      operationId: uploadFile
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
      responses:
        '200':
          description: ok
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                    format: uuid
components:
  schemas:
    LoginRequestBody:
      type: object
      description: Данные для входа.
      required:
        - login
        - password
      properties:
        login:
          description: Имя пользователя
          type: string
        password:
          description: Пароль
          type: string
    ProfileDto:
      type: object
      required:
        - id
        - name
        - avatar
      properties:
        id:
          description: ID пользователя
          type: string
        name:
          description: Фио пользователя
          type: string
        avatar:
          description: Ссылка на фотографию пользователя
          type: string
    Order:
      type: object
      required:
        - name
        - desc
      properties:
        type:
          description: Имя поля
          type: string
        desc:
          description: Обратная сорировка
          type: boolean
    Filter:
      type: object
      required:
        - name
        - predicate
        - value
      properties:
        name:
          description: Имя фильтра
          type: string
        predicate:
          description: Метод поиска
          type: string
          enum:
            - IS_YEARLY_TODAY
            - EQ
            - CONTAINS
            - LT
            - LTE
            - GT
            - GTE
        value:
          description: Значение
    RequestBody:
      type: object
      required:
        - skip
        - limit
      properties:
        search:
          description: Строка поиска
          type: string
        order:
          type: array
          items:
            $ref: '#/components/schemas/Order'
        skip:
          description: Начать с номера элемента
          type: number
        limit:
          description: Лимит количества
          type: number
        filters:
          type: array
          items:
            $ref: '#/components/schemas/Filter'
    CommentDto:
      type: object
      required:
        - id
        - text
        - date
        - author
      properties:
        id:
          description: ID
          type: string
          format: uuid
        text:
          description: Текст комментария
          type: string
        date:
          description: Дата комментария
          type: string
          format: date
        author:
          description: ID пользователя, оставившего комментарий
          type: string
          format: uuid
        removed:
          description: Комментарий удален
          type: boolean
        editDate:
          description: Дата последнего исправления комментария
          type: string
          format: date
        parentId:
          description: ID комментария, в ветке которого создан этот комментарий
          type: string
          format: uuid
    CommentDraftDto:
      type: object
      required:
        - text
      properties:
        text:
          description: Текст комментария
          type: string
    CommentsListDto:
      type: object
      required:
        - total
        - items
      properties:
        total:
          description: Общее количество
          type: number
        items:
          description: Список элементов
          type: array
          items:
            $ref: '#/components/schemas/CommentDto'
    NewsDto:
      type: object
      required:
        - id
        - title
        - announce
        - text
        - img
        - date
        - createDate
        - updateDate
        - createUserId
        - updateUserId
        - newsSectionId
      properties:
        id:
          description: ID
          type: string
          format: uuid
        title:
          description: Заголовок
          type: string
        announce:
          description: Заголовок
          type: string
        text:
          description: Текст
          type: string
        img:
          description: Ссылка на картинку
          type: string
        date:
          description: Дата новости
          type: string
          format: date
        createDate:
          description: Дата создания новости
          type: string
          format: date
        updateDate:
          description: Дата обновления новости
          type: string
          format: date
        createUserId:
          description: ID пользователя, создавшего новости
          type: string
          format: uuid
        updateUserId:
          description: ID последнего последнего пользователя, изменившего новость
          type: string
          format: uuid
        newsSectionId:
          description: ID рубрики новости
          type: string
          format: uuid
        isLikedByMe:
          description: Лайкнул ли я новость
          type: boolean
        likesCount:
          description: Количество лайков
          type: number
        isViewedByMe:
          description: Просмотрел ли я новость
          type: boolean
        viewsCount:
          description: Количество просмотров
          type: number
        сommentsCount:
          description: Количество комментариев
          type: number
    NewsDraftDto:
      type: object
      required:
        - title
        - announce
        - text
        - img
        - date
      properties:
        title:
          description: Заголовок
          type: string
        announce:
          description: Заголовок
          type: string
        text:
          description: Текст
          type: string
        img:
          description: Ссылка на картинку
          type: string
        date:
          description: Дата новости
          type: string
          format: date
    NewsListDto:
      type: object
      required:
        - total
        - items
      properties:
        total:
          description: Общее количество
          type: number
        items:
          description: Список элементов
          type: array
          items:
            $ref: '#/components/schemas/NewsDto'
    SurveyDto:
      type: object
      required:
        - id
        - title
        - announce
        - date
        - createDate
        - updateDate
        - createUserId
        - updateUserId
      properties:
        id:
          description: ID
          type: string
          format: uuid
        parentId:
          description: Parent ID
          type: string
          format: uuid
        title:
          description: Заголовок
          type: string
        announce:
          description: Заголовок
          type: string
        text:
          description: Текст
          type: string
        img:
          description: Ссылка на картинку
          type: string
        minCount:
          description: Можно ли выбрать несколько вариантов
          type: number
        maxCount:
          description: Можно ли выбрать несколько вариантов
          type: number
        editable:
          description: Можно ли переголосовать
          type: boolean
        anonymous:
          description: Анонимный опрос (в результатах не будет видно кто какой вариант выбрал)
          type: boolean
        public:
          description: Результаты видны пользователям
          type: boolean
        choices:
          description: Варианты ответов
          type: array
          items:
            $ref: '#/components/schemas/ChoiceDto'
        date:
          description: Дата новости
          type: string
          format: date
        finishDate:
          description: Дата после которой нельзя будет ответить
          type: string
          format: date
        createDate:
          description: Дата создания новости
          type: string
          format: date
        updateDate:
          description: Дата обновления новости
          type: string
          format: date
        createUserId:
          description: ID пользователя, создавшего новости
          type: string
          format: uuid
        updateUserId:
          description: ID последнего последнего пользователя, изменившего новость
          type: string
          format: uuid
    SurveyDraftDto:
      type: object
      required:
        - title
        - announce
        - date
        - choices
      properties:
        parentId:
          description: Parent ID
          type: string
          format: uuid
        title:
          description: Заголовок
          type: string
        announce:
          description: Заголовок
          type: string
        text:
          description: Текст
          type: string
        img:
          description: Ссылка на картинку
          type: string
        minCount:
          description: Можно ли выбрать несколько вариантов
          type: number
        maxCount:
          description: Можно ли выбрать несколько вариантов
          type: number
        anonymous:
          description: Анонимный опрос (в результатах не будет видно кто какой вариант выбрал)
          type: boolean
        public:
          description: Результаты видны пользователям
          type: boolean
        editable:
          description: Можно ли переголосовать
          type: boolean
        choices:
          description: Варианты ответов
          type: array
          items:
            $ref: '#/components/schemas/ChoiceDraftDto'
        date:
          description: Дата новости
          type: string
          format: date
        finishDate:
          description: Дата после которой нельзя будет ответить
          type: string
          format: date
    SurveysListDto:
      type: object
      required:
        - total
        - items
      properties:
        total:
          description: Общее количество
          type: number
        items:
          description: Список элементов
          type: array
          items:
            $ref: '#/components/schemas/SurveyDto'
    NoticeDto:
      type: object
      required:
        - id
        - title
        - announce
        - text
        - date
        - createDate
        - updateDate
        - createUserId
        - updateUserId
      properties:
        id:
          description: ID
          type: string
          format: uuid
        title:
          description: Заголовок
          type: string
        announce:
          description: Заголовок
          type: string
        text:
          description: Текст
          type: string
        date:
          description: Дата новости
          type: string
          format: date
        createDate:
          description: Дата создания новости
          type: string
          format: date
        updateDate:
          description: Дата обновления новости
          type: string
          format: date
        createUserId:
          description: ID пользователя, создавшего новости
          type: string
          format: uuid
        updateUserId:
          description: ID последнего последнего пользователя, изменившего новость
          type: string
          format: uuid
        isLikedByMe:
          description: Лайкнул ли я новость
          type: boolean
        likesCount:
          description: Количество лайков
          type: number
        isViewedByMe:
          description: Просмотрел ли я новость
          type: boolean
        viewsCount:
          description: Количество просмотров
          type: number
        сommentsCount:
          description: Количество комментариев
          type: number
    NoticeDraftDto:
      type: object
      required:
        - title
        - announce
        - text
        - date
      properties:
        title:
          description: Заголовок
          type: string
        announce:
          description: Заголовок
          type: string
        text:
          description: Текст
          type: string
        date:
          description: Дата новости
          type: string
          format: date
    NoticeListDto:
      type: object
      required:
        - total
        - items
      properties:
        total:
          description: Общее количество
          type: number
        items:
          description: Список элементов
          type: array
          items:
            $ref: '#/components/schemas/NoticeDto'
    LikesListDto:
      type: object
      required:
        - total
        - items
      properties:
        total:
          description: Общее количество
          type: number
        items:
          description: Список элементов
          type: array
          items:
            $ref: '#/components/schemas/LikeDto'
    EmployeesListDto:
      type: object
      required:
        - total
        - items
      properties:
        total:
          description: Общее количество
          type: number
        items:
          description: Список элементов
          type: array
          items:
            $ref: '#/components/schemas/EmployeeDto'
    DepartmentDto:
      type: object
      required:
        - id
        - name
        - directorId
      properties:
        id:
          description: ID
          type: string
          format: uuid
        name:
          description: Имя
          type: string
        directorId:
          description: ID пользователя руководителя подразделения
          type: string
          format: uuid
        parentId:
          description: ID родительского подразделения
          type: string
          format: uuid
    NewsSectionDto:
      type: object
      required:
        - id
        - name
      properties:
        id:
          description: ID
          type: string
          format: uuid
        name:
          description: Имя
          type: string
        parentId:
          description: Телефон
          type: string
          format: uuid
    EmployeeDto:
      type: object
      required:
        - id
        - name
        - lastName
        - surName
        - mobilePhone
        - workPhone
        - email
        - departmentId
        - position
        - birthday
        - workStartDate
        - workEndDate
        - photo
        - cabinet
      properties:
        id:
          description: ID
          type: string
          format: uuid
        firstName:
          description: Имя
          type: string
        lastName:
          description: Фамилия
          type: string
        surName:
          description: Фамилия
          type: string
        mobilePhone:
          description: Телефон
          type: string
        workPhone:
          description: Телефон
          type: string
        email:
          description: Email
          type: string
        departmentId:
          description: Подразделение
          type: string
          format: uuid
        position:
          description: Должность
          type: string
        birthday:
          description: День рождения
          type: string
          format: date
        workStartDate:
          description: Дата приему на работу
          type: string
          format: date
        workEndDate:
          description: Дата увольнения на работу
          type: string
          format: date
        photo:
          description: Фотография в base64
          type: string
        cabinet:
          description: Кабинет
          type: string
    LikeDto:
      type: object
      required:
        - id
        - date
        - author
      properties:
        id:
          description: ID
          type: string
          format: uuid
        date:
          description: Дата лайка
          type: string
          format: date
        author:
          description: ID пользователя, оставившего лайк
          type: string
          format: uuid
    ChoiceDraftDto:
      type: object
      required:
        - date
        - text
      properties:
        id:
          description: ID
          type: string
          format: uuid
        custom:
          description: Человек сам введет текст ответа
          type: boolean
        text:
          description: Текст варианта ответа
          type: string
          format: date
    ChoiceDto:
      type: object
      required:
        - id
        - text
        - count
      properties:
        id:
          description: ID
          type: string
          format: uuid
        custom:
          description: Человек сам вводит вариант ответа
          type: boolean
        text:
          description: Текст варианта ответа
          type: string
          format: date
        count:
          description: Сколько проголосовали
          type: number
    AnswerDraftDto:
      type: object
      required:
        - id
        - date
        - author
        - choicesIds
      properties:
        id:
          description: ID
          type: string
          format: uuid
        date:
          description: Дата ответа
          type: string
          format: date
        author:
          description: ID проголосовавшего юзера
          type: string
          format: uuid
        text:
          description: Текст ответа, если в опросе свойство custom = true
          type: string
        choicesIds:
          description: Список ответов
          type: array
          items:
            type: string
            format: uuid
    AnswerDto:
      type: object
      required:
        - choicesIds
      properties:
        id:
          description: ID
          type: string
          format: uuid
        text:
          description: Текст ответа, если в опросе свойство custom = true
          type: string
        choices:
          description: Список ответов
          type: array
          items:
            $ref: '#/components/schemas/ChoiceDto'
